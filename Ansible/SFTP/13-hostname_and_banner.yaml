- name: Configure Hostname and custom banner
  hosts: all
  become: true

  tasks:
    - name: Set Hostname
      become: true
      ansible.builtin.hostname:
        name: "{{ inventory_hostname }}"
  
    - name: Create login banner script
      copy:
        dest: /etc/profile.d/login-banner.sh
        content: |
          #!/bin/bash
          echo ""
          echo "==============================="
          echo " Hostname: $(hostname)"
          echo " Date:     $(date)"
          echo " Kernel:   $(uname -r)"
          echo "==============================="
          echo ""
        mode: '0755'
        owner: root
        group: root
      changed_when: false

    - name: Edite /etc/motd
      become: true
      ansible.builtin.template:
        src: 14-motd.j2
        dest: /etc/motd
        mode: '0644'
      changed_when: false